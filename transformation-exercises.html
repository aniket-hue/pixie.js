<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matrix Transformation Exercises üßÆ</title>
    <style>
        body { 
            font-family: 'Courier New', monospace; 
            margin: 20px; 
            background: #1a1a1a; 
            color: #fff; 
        }
        .exercise { 
            background: #2d2d2d; 
            border: 2px solid #444; 
            padding: 20px; 
            margin: 20px 0; 
            border-radius: 8px; 
        }
        .canvas-container { 
            display: flex; 
            gap: 20px; 
            align-items: center; 
        }
        canvas { 
            border: 2px solid #666; 
            background: #fff; 
        }
        button { 
            padding: 10px 20px; 
            background: #007acc; 
            color: white; 
            border: none; 
            border-radius: 4px; 
            cursor: pointer; 
            margin: 5px; 
        }
        button:hover { background: #005fa3; }
        .result { 
            font-size: 14px; 
            background: #1a3a1a; 
            padding: 10px; 
            border-radius: 4px; 
            margin-top: 10px; 
        }
        .matrix { 
            font-family: monospace; 
            background: #333; 
            padding: 10px; 
            border-radius: 4px; 
            display: inline-block; 
            margin: 10px; 
        }
        h2 { color: #4fc3f7; }
        h3 { color: #81c784; }
    </style>
</head>
<body>
    <h1>üßÆ Matrix Transformation Exercises</h1>
    <p>Complete these exercises to master transformations! Each builds on the previous one.</p>

    <!-- Exercise 1: Basic Matrix Operations -->
    <div class="exercise">
        <h2>Exercise 1: Basic Matrix Operations üî¢</h2>
        <p>Let's start with simple 2D transformation matrices. Fill in the results:</p>
        
        <h3>Translation Matrix T(3, 2):</h3>
        <div class="matrix" id="translation-matrix">
            [1, 0, 3]<br>
            [0, 1, 2]<br>
            [0, 0, 1]
        </div>
        
        <p><strong>Question:</strong> What happens to point (5, 7) when multiplied by this matrix?</p>
        <input type="text" id="translation-result" placeholder="Enter (x, y)">
        <button onclick="checkTranslation()">Check Answer</button>
        <div id="translation-feedback" class="result"></div>

        <h3>Scaling Matrix S(2, 3):</h3>
        <div class="matrix" id="scaling-matrix">
            [2, 0, 0]<br>
            [0, 3, 0]<br>
            [0, 0, 1]
        </div>
        
        <p><strong>Question:</strong> What happens to point (4, 2) when multiplied by this matrix?</p>
        <input type="text" id="scaling-result" placeholder="Enter (x, y)">
        <button onclick="checkScaling()">Check Answer</button>
        <div id="scaling-feedback" class="result"></div>
    </div>

    <!-- Exercise 2: Matrix Multiplication -->
    <div class="exercise">
        <h2>Exercise 2: Matrix Multiplication Order üîÑ</h2>
        <p>Understanding the order of matrix operations is crucial!</p>
        
        <div class="canvas-container">
            <canvas id="canvas1" width="200" height="200"></canvas>
            <div>
                <h3>Scenario:</h3>
                <p>üî¥ Red square at (50, 50)</p>
                <p>We want to: Scale 2x, then Translate (30, 20)</p>
                <br>
                <button onclick="doScaleThenTranslate()">Scale ‚Üí Translate</button>
                <button onclick="doTranslateThenScale()">Translate ‚Üí Scale</button>
                <button onclick="resetCanvas1()">Reset</button>
            </div>
        </div>
        
        <p><strong>Question:</strong> Which order gives the expected result?</p>
        <div id="multiplication-feedback" class="result"></div>
    </div>

    <!-- Exercise 3: Zoom at Point -->
    <div class="exercise">
        <h2>Exercise 3: Zoom at Specific Point üéØ</h2>
        <p>Now the main challenge - zooming at a specific point!</p>
        
        <div class="canvas-container">
            <canvas id="canvas2" width="300" height="300"></canvas>
            <div>
                <h3>Scenario:</h3>
                <p>üî¥ Red circle at (100, 100)</p>
                <p>üîµ Blue circle at (200, 150)</p>
                <p>Mouse at (150, 125) - shown as ‚ùå</p>
                <br>
                <button onclick="wrongZoom()">‚ùå Simple Scale (Wrong)</button>
                <button onclick="correctZoom()">‚úÖ Scale at Point (Correct)</button>
                <button onclick="resetCanvas2()">Reset</button>
            </div>
        </div>
        
        <p><strong>Question:</strong> In the correct version, which circle moves and which stays relatively in place?</p>
        <div id="zoom-feedback" class="result"></div>
    </div>

    <!-- Exercise 4: Build Your Own -->
    <div class="exercise">
        <h2>Exercise 4: Build the Transformation üõ†Ô∏è</h2>
        <p>Create the transformation matrix for "Scale 1.5x around point (60, 80)"</p>
        
        <div>
            <h3>Step 1 - Translate to Origin:</h3>
            <input type="text" id="step1" placeholder="T(?, ?)">
            
            <h3>Step 2 - Scale:</h3>
            <input type="text" id="step2" placeholder="S(?, ?)">
            
            <h3>Step 3 - Translate Back:</h3>
            <input type="text" id="step3" placeholder="T(?, ?)">
            
            <br><br>
            <button onclick="checkBuildTransform()">Check My Solution</button>
            <div id="build-feedback" class="result"></div>
        </div>
    </div>

    <!-- Exercise 5: Interactive Canvas -->
    <div class="exercise">
        <h2>Exercise 5: Interactive Practice üéÆ</h2>
        <p>Click anywhere on the canvas to zoom 2x at that point!</p>
        
        <canvas id="interactive-canvas" width="400" height="300" style="cursor: crosshair;"></canvas>
        <br>
        <button onclick="resetInteractive()">Reset Scene</button>
        <div id="interactive-info" class="result">Click on the canvas to zoom at that point!</div>
    </div>

    <script>
        // Exercise 1: Basic Operations
        function checkTranslation() {
            const input = document.getElementById('translation-result').value;
            const feedback = document.getElementById('translation-feedback');
            
            if (input.includes('8') && input.includes('9')) {
                feedback.innerHTML = "‚úÖ Correct! (5+3, 7+2) = (8, 9)";
                feedback.style.background = "#1a3a1a";
            } else {
                feedback.innerHTML = "‚ùå Try again! Remember: translation adds to coordinates.";
                feedback.style.background = "#3a1a1a";
            }
        }

        function checkScaling() {
            const input = document.getElementById('scaling-result').value;
            const feedback = document.getElementById('scaling-feedback');
            
            if (input.includes('8') && input.includes('6')) {
                feedback.innerHTML = "‚úÖ Correct! (4√ó2, 2√ó3) = (8, 6)";
                feedback.style.background = "#1a3a1a";
            } else {
                feedback.innerHTML = "‚ùå Try again! Remember: scaling multiplies coordinates.";
                feedback.style.background = "#3a1a1a";
            }
        }

        // Exercise 2: Matrix Multiplication
        function doScaleThenTranslate() {
            const canvas = document.getElementById('canvas1');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Original position
            ctx.fillStyle = 'lightgray';
            ctx.fillRect(45, 45, 10, 10);
            
            // Scale first: (50, 50) ‚Üí (100, 100)
            // Then translate: (100, 100) ‚Üí (130, 120)
            ctx.fillStyle = 'red';
            ctx.fillRect(125, 115, 20, 20);
            
            document.getElementById('multiplication-feedback').innerHTML = 
                "Result: Square moved to (130, 120) and got bigger. This is usually what we want!";
        }

        function doTranslateThenScale() {
            const canvas = document.getElementById('canvas1');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Original position
            ctx.fillStyle = 'lightgray';
            ctx.fillRect(45, 45, 10, 10);
            
            // Translate first: (50, 50) ‚Üí (80, 70)
            // Then scale: (80, 70) ‚Üí (160, 140) - goes off canvas!
            ctx.fillStyle = 'red';
            ctx.fillRect(155, 135, 20, 20);
            
            document.getElementById('multiplication-feedback').innerHTML = 
                "Result: Square moved much further! Translation got scaled too. Usually not what we want.";
        }

        function resetCanvas1() {
            const canvas = document.getElementById('canvas1');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = 'red';
            ctx.fillRect(45, 45, 10, 10);
            document.getElementById('multiplication-feedback').innerHTML = "";
        }

        // Exercise 3: Zoom at Point
        function wrongZoom() {
            const canvas = document.getElementById('canvas2');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Mouse position
            ctx.strokeStyle = 'black';
            ctx.lineWidth = 2;
            drawX(ctx, 150, 125);
            
            // Simple scale from origin - everything moves away from (0,0)
            drawCircle(ctx, 200, 200, 'red');  // Red moved from (100,100)
            drawCircle(ctx, 400, 300, 'blue'); // Blue moved from (200,150) - off canvas!
            
            document.getElementById('zoom-feedback').innerHTML = 
                "‚ùå Both circles moved away from the mouse! Blue circle even went off-canvas.";
        }

        function correctZoom() {
            const canvas = document.getElementById('canvas2');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Mouse position
            ctx.strokeStyle = 'black';
            ctx.lineWidth = 2;
            drawX(ctx, 150, 125);
            
            // Scale around mouse point (150, 125)
            // Red circle: distance from mouse = (100-150, 100-125) = (-50, -25)
            // After 2x scale: distance = (-100, -50)
            // New position: (150-100, 125-50) = (50, 75)
            drawCircle(ctx, 50, 75, 'red');
            
            // Blue circle: distance from mouse = (200-150, 150-125) = (50, 25)  
            // After 2x scale: distance = (100, 50)
            // New position: (150+100, 125+50) = (250, 175)
            drawCircle(ctx, 250, 175, 'blue');
            
            document.getElementById('zoom-feedback').innerHTML = 
                "‚úÖ Perfect! Both circles moved away from the mouse point, maintaining their relative positions.";
        }

        function resetCanvas2() {
            const canvas = document.getElementById('canvas2');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Mouse position
            ctx.strokeStyle = 'black';
            ctx.lineWidth = 2;
            drawX(ctx, 150, 125);
            
            // Original positions
            drawCircle(ctx, 100, 100, 'red');
            drawCircle(ctx, 200, 150, 'blue');
            
            document.getElementById('zoom-feedback').innerHTML = "";
        }

        function drawCircle(ctx, x, y, color) {
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.arc(x, y, 15, 0, 2 * Math.PI);
            ctx.fill();
        }

        function drawX(ctx, x, y) {
            ctx.beginPath();
            ctx.moveTo(x-10, y-10);
            ctx.lineTo(x+10, y+10);
            ctx.moveTo(x+10, y-10);
            ctx.lineTo(x-10, y+10);
            ctx.stroke();
        }

        // Exercise 4: Build Transform
        function checkBuildTransform() {
            const step1 = document.getElementById('step1').value.toLowerCase();
            const step2 = document.getElementById('step2').value.toLowerCase();
            const step3 = document.getElementById('step3').value.toLowerCase();
            const feedback = document.getElementById('build-feedback');
            
            const correct1 = step1.includes('-60') && step1.includes('-80');
            const correct2 = step2.includes('1.5');
            const correct3 = step3.includes('60') && step3.includes('80') && !step3.includes('-');
            
            if (correct1 && correct2 && correct3) {
                feedback.innerHTML = "üéâ Perfect! T(-60,-80) ‚Üí S(1.5,1.5) ‚Üí T(60,80)";
                feedback.style.background = "#1a3a1a";
            } else {
                let hints = "Hints: ";
                if (!correct1) hints += "Step 1 should move point to origin. ";
                if (!correct2) hints += "Step 2 should scale by 1.5. ";
                if (!correct3) hints += "Step 3 should move back to original position. ";
                feedback.innerHTML = "‚ùå " + hints;
                feedback.style.background = "#3a1a1a";
            }
        }

        // Exercise 5: Interactive
        let objects = [
            {x: 50, y: 50, color: 'red'},
            {x: 150, y: 100, color: 'blue'},
            {x: 300, y: 200, color: 'green'},
        ];

        function drawInteractiveScene() {
            const canvas = document.getElementById('interactive-canvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            objects.forEach(obj => {
                ctx.fillStyle = obj.color;
                ctx.fillRect(obj.x-10, obj.y-10, 20, 20);
            });
        }

        function resetInteractive() {
            objects = [
                {x: 50, y: 50, color: 'red'},
                {x: 150, y: 100, color: 'blue'},
                {x: 300, y: 200, color: 'green'},
            ];
            drawInteractiveScene();
            document.getElementById('interactive-info').innerHTML = "Scene reset! Click to zoom at any point.";
        }

        // Initialize canvases
        resetCanvas1();
        resetCanvas2();
        drawInteractiveScene();

        // Interactive canvas click handler
        document.getElementById('interactive-canvas').addEventListener('click', function(e) {
            const rect = this.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;
            
            // Zoom 1.5x around mouse point
            const scale = 1.5;
            objects = objects.map(obj => {
                const dx = obj.x - mouseX;
                const dy = obj.y - mouseY;
                return {
                    ...obj,
                    x: mouseX + dx * scale,
                    y: mouseY + dy * scale
                };
            });
            
            drawInteractiveScene();
            document.getElementById('interactive-info').innerHTML = 
                `Zoomed 1.5x around point (${Math.round(mouseX)}, ${Math.round(mouseY)})`;
        });
    </script>
</body>
</html>
